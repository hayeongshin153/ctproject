<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì»´í“¨íŒ… ì‚¬ê³  ê¸°ë°˜ ë¬¸ì œ í•´ê²° í™œë™</title>
  <style>
    body { font-family: "ë§‘ì€ ê³ ë”•", sans-serif; margin: 20px; }
    h1 { color: #1a237e; }
    h2 { color: #d32f2f; }
    .tabs { display: flex; margin-top: 20px; }
    .tab-button {
      padding: 10px 20px; margin-right: 5px;
      border: 1px solid #ccc; background: #f5f5f5; cursor: pointer;
    }
    .tab-button.active {
      background: white; border-bottom: none; font-weight: bold;
    }
    .tab-content { display: none; border: 1px solid #ccc; padding: 20px; }
    .tab-content.active { display: block; }

    table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
    th, td { border: 1px solid #999; padding: 8px; text-align: center; }
    th { background: #eee; }
    .highlight { background: #e0efff; }
    .border-red { border: 3px solid red !important; }
    .border-blue { border: 3px solid blue !important; }

    input[type="checkbox"] { margin-right: 6px; }
    .correct { color: green; font-weight: bold; }
    .incorrect { color: red; font-weight: bold; }
  </style>
</head>
<body>
  <h1>ì˜¤ëŠ˜ì€ ì–´ë””ë¡œ ê°€ì•¼í• ê¹Œ?</h1>
  <h2>
    ì»´í“¨íŒ… ì‚¬ê³  ê¸°ë°˜ ë¬¸ì œ í•´ê²° í™œë™
    <button onclick="generateRandomDayPeriod()" style="margin-left:20px;">ğŸ“… ìš”ì¼Â·êµì‹œ ëœë¤ ìƒì„±</button>
  </h2>
  <div id="randomResult" style="margin: 10px 0; font-weight: bold;"></div>

  <h3>ğŸ“Œ ê¸¸ë™ì´ì˜ ì „ì²´ ì‹œê°„í‘œ</h3>
  <div id="timetable-container"></div>

  <div style="margin-top: 10px; font-size: 0.95em;">
    <p style="color:#444;">
      ğŸ”· <strong>ìƒ‰ì¹ ëœ ì‹œê°„</strong>ì€ íŠ¹ìˆ˜í•™ê¸‰ ìˆ˜ì—… ì‹œê°„ì…ë‹ˆë‹¤.
    </p>
    <p style="color:#444;">
      ğŸ“ <strong>ë‹¤ìŒ ê³¼ëª©ì€ ì§€ì • ì¥ì†Œë¡œ ì´ë™í•˜ì„¸ìš”</strong> â†’  
      ì²´ìœ¡: <span style="color:#2e86c1;">ìš´ë™ì¥</span>,  
      ìŒì•…: <span style="color:#af7ac5;">ìŒì•…ì‹¤</span>,  
      ë¯¸ìˆ : <span style="color:#f39c12;">ë¯¸ìˆ ì‹¤</span>,  
      ê³¼í•™: <span style="color:#27ae60;">ê³¼í•™ì‹¤</span>
    </p>
  </div>

  <!-- íƒ­ ë²„íŠ¼ -->
  <div class="tabs">
    <div class="tab-button active" onclick="showTab(0)">1. ë¬¸ì œ ë¶„í•´</div>
    <div class="tab-button" onclick="showTab(1)">2. ì¶”ìƒí™”</div>
    <div class="tab-button" onclick="showTab(2)">3. íŒ¨í„´ ì¸ì‹</div>
    <div class="tab-button" onclick="showTab(3)">4. ì•Œê³ ë¦¬ì¦˜</div>
  </div>

  <!-- 1. ë¬¸ì œ ë¶„í•´ -->
  <div class="tab-content active">
    <h3>ğŸ“Œ ë¬¸ì œ ë¶„í•´:ë³µì¡í•œ ë¬¸ì œë¥¼ ì‘ì€ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.</h3>
    <p>ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë° í•„ìš”í•œ ë‚´ìš©ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
    <label><input type="checkbox" class="decomp-check" value="ìš”ì¼">ìš”ì¼</label><br>
    <label><input type="checkbox" class="decomp-check" value="ì„ ìƒë‹˜ ì´ë¦„">ì„ ìƒë‹˜ ì´ë¦„</label><br>
    <label><input type="checkbox" class="decomp-check" value="ê³¼ëª©">ê³¼ëª©</label><br>
    <label><input type="checkbox" class="decomp-check" value="êµì‹œ">êµì‹œ</label><br>
    <label><input type="checkbox" class="decomp-check" value="ê³¼ëª©ë³„ ìˆ˜ì—… ì¥ì†Œ">ê³¼ëª©ë³„ ìˆ˜ì—… ì¥ì†Œ</label><br>
    <label><input type="checkbox" class="decomp-check" value="íŠ¹ìˆ˜í•™ê¸‰ ìˆ˜ì—…">íŠ¹ìˆ˜í•™ê¸‰ ìˆ˜ì—…</label><br>
    <button onclick="checkDecomposition()">ì •ë‹µ í™•ì¸</button>
    <div id="decompResult" style="margin-top:10px;"></div>
  </div>
  <!-- 2. ì¶”ìƒí™” -->
  <div class="tab-content">
    <h3>ğŸ“Œ ì¶”ìƒí™”:ê¼­ í•„ìš”í•œ ì •ë³´ë§Œ ë‚¨ê¸°ê³ , ë¶ˆí•„ìš”í•œ ê±´ ë²„ë¦¬ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.</h3>
    <label>ìš”ì¼ ì„ íƒ:
      <select id="daySelect" onchange="renderAbstraction()">
        <option>ì›”</option><option>í™”</option><option>ìˆ˜</option>
        <option>ëª©</option><option>ê¸ˆ</option>
      </select>
    </label>
    <div id="abstractionTable"></div>
    <button onclick="checkAbstraction()">ì •ë‹µ í™•ì¸</button>
    <div id="abstractionResult" style="margin-top:10px;"></div>
  </div>

  <!-- 3. íŒ¨í„´ ì¸ì‹ -->
  <div class="tab-content">
    <h3>ğŸ“Œ íŒ¨í„´ ì¸ì‹:ë¹„ìŠ·í•œ ë¬¸ì œë‚˜ ê·œì¹™ì„ ì°¾ì•„ë‚´ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.</h3>
    <p>ì‹œê°„í‘œì—ì„œ ë‚˜íƒ€ë‚˜ëŠ” 2ê°€ì§€ íŒ¨í„´ì„ ì•„ë˜ ë³´ê¸° ì¤‘ì—ì„œ ì°¾ìœ¼ì„¸ìš”.</p>
    <label><input type="checkbox" class="pattern-check" value="special">ëª¨ë“  ìƒ‰ì¹ ëœ ê³¼ëª©ì€ íŠ¹ìˆ˜í•™ê¸‰ ìˆ˜ì—…ì´ë‹¤.</label><br>
    <label><input type="checkbox" class="pattern-check" value="wrong1">ëª¨ë“  ìƒ‰ì¹ ëœ ê³¼ëª©ì€ ì¼ë°˜êµì‹¤ ìˆ˜ì—…ì´ë‹¤.</label><br>
    <label><input type="checkbox" class="pattern-check" value="move">ì²´ìœ¡Â·ìŒì•…Â·ë¯¸ìˆ Â·ê³¼í•™ì€ ì§€ì •ëœ ë‹¤ë¥¸ ì¥ì†Œë¡œ ì´ë™í•´ì•¼ í•œë‹¤.</label><br>
    <label><input type="checkbox" class="pattern-check" value="wrong2">êµ­ì–´Â·ìˆ˜í•™Â·ì˜ì–´Â·ë„ë•ì€ ì´ë™í•´ì•¼ í•œë‹¤.</label><br>
    <button onclick="checkPatternVisual()">ì •ë‹µ ë³´ê¸°</button>
    <div id="patternResult" style="margin-top:10px;"></div>
  </div>

  <!-- 4. ì•Œê³ ë¦¬ì¦˜ -->
  <div class="tab-content">
    <h3>ğŸ“Œ ì•Œê³ ë¦¬ì¦˜:ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ìˆœì„œë‚˜ ì ˆì°¨ë¥¼ ë§Œë“œëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤.</h3>
    <p>ìš”ì¼Â·êµì‹œÂ·ê³¼ëª©ëª…Â·íŠ¹ìˆ˜í•™ê¸‰ ì—¬ë¶€ë¥¼ ì„ íƒí•˜ê³ , í•´ë‹¹ êµì‹œì— ê°€ì•¼í•  ì¥ì†Œë¥¼ ì˜ˆì¸¡í•´ ë³´ì„¸ìš”.</p>
    <table>
      <tr>
        <td>ë¬´ìŠ¨ ìš”ì¼ì¸ê°€ìš”?</td>
        <td>
          <select id="algo-day">
            <option>ì›”</option><option>í™”</option><option>ìˆ˜</option>
            <option>ëª©</option><option>ê¸ˆ</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>ëª‡ êµì‹œì¸ê°€ìš”?</td>
        <td>
          <select id="algo-period">
            <option>1êµì‹œ</option><option>2êµì‹œ</option><option>3êµì‹œ</option>
            <option>4êµì‹œ</option><option>5êµì‹œ</option><option>6êµì‹œ</option>
            <option>7êµì‹œ</option>
          </select>
        </td>
      </tr>
      <tr>
        <td>ê³¼ëª©ëª…ì€ ë¬´ì—‡ì¸ê°€ìš”?</td>
        <td><input type="text" id="algo-subject" placeholder="ì˜ˆ: êµ­ì–´"></td>
      </tr>
      <tr>
        <td>íŠ¹ìˆ˜í•™ê¸‰ ìˆ˜ì—…ì¸ê°€ìš”?</td>
        <td>
          <select id="algo-special" onchange="toggleMovementQuestion()">
            <option>ì˜ˆ</option>
            <option>ì•„ë‹ˆì˜¤</option>
          </select>
        </td>
      </tr>
      <tr id="movement-question" style="display: none;">
        <td>ì§€ì • ì¥ì†Œë¡œ ì´ë™í•´ì•¼í•˜ëŠ” ê³¼ëª©ì¸ê°€ìš”?</td>
        <td>
          <select id="algo-moving-subject">
            <option>ì˜ˆ</option>
            <option>ì•„ë‹ˆì˜¤</option>
          </select>
        </td>
      </tr>
      <tr>
        <td><b>ì˜ˆìƒë˜ëŠ” ìˆ˜ì—… ì¥ì†Œë¥¼ ì„ íƒí•˜ì„¸ìš”.</b></td>
        <td>
          <select id="algo-prediction">
            <option>íŠ¹ìˆ˜í•™ê¸‰</option>
            <option>ì¼ë°˜í•™ê¸‰</option>
            <option>ìš´ë™ì¥</option>
            <option>ìŒì•…ì‹¤</option>
            <option>ê³¼í•™ì‹¤</option>
            <option>ë¯¸ìˆ ì‹¤</option>
          </select>
        </td>
      </tr>
    </table>
    <button onclick="checkAlgorithmAnswer()">ì •ë‹µ í™•ì¸</button>
    <div id="algo-result" style="margin-top:10px;"></div>
  </div>
<script>
const subjects = ["êµ­ì–´", "ìˆ˜í•™", "ì‚¬íšŒ", "ê³¼í•™", "ë„ë•", "ì˜ì–´", "ì²´ìœ¡", "ë¯¸ìˆ ", "ìŒì•…", "ê¸°ìˆ ", "ê°€ì •", "ììœ¨", "ë™ì•„ë¦¬", "ìŠ¤í¬ì¸  í´ëŸ½", "ì—­ì‚¬"];
let timetable = {}, special = {};

// ì‹œê°„í‘œ ìë™ ìƒì„±
function generateRandomTimetable() {
  const days = ["ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ"];
  for (const day of days) {
    timetable[day] = Array.from({length: 7}, () => subjects[Math.floor(Math.random() * subjects.length)]);
    const s = new Set();
    while (s.size < 2) s.add(Math.floor(Math.random() * 7) + 1);
    special[day] = [...s].sort();
  }
}

// ì‹œê°„í‘œ ì¶œë ¥
function renderTimetableTable() {
  const days = ["ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ"];
  let html = '<table><thead><tr><th>êµì‹œ</th>' + days.map(d => `<th>${d}</th>`).join('') + '</tr></thead><tbody>';
  for (let i = 0; i < 7; i++) {
    html += `<tr><td>${i + 1}êµì‹œ</td>` + days.map(day => {
      const cls = special[day].includes(i + 1) ? 'highlight' : '';
      return `<td id="${day}_${i+1}" class="${cls}">${timetable[day][i]}</td>`;
    }).join('') + '</tr>';
  }
  html += '</tbody></table>';
  document.getElementById('timetable-container').innerHTML = html;
}

// ë¬¸ì œ ë¶„í•´ í™•ì¸
function checkDecomposition() {
  const correct = ["ìš”ì¼", "ê³¼ëª©", "êµì‹œ", "ê³¼ëª©ë³„ ìˆ˜ì—… ì¥ì†Œ", "íŠ¹ìˆ˜í•™ê¸‰ ìˆ˜ì—…"];
  const selected = Array.from(document.querySelectorAll('.decomp-check:checked')).map(cb => cb.value);
  const result = correct.every(v => selected.includes(v)) && selected.every(v => correct.includes(v));
  document.getElementById('decompResult').innerHTML = result
    ? "<span class='correct'>ì •ë‹µì…ë‹ˆë‹¤! âœ…</span>"
    : "<span class='incorrect'>ì˜¤ë‹µì…ë‹ˆë‹¤ âŒ</span>";
}

// ì¶”ìƒí™” ì¶œë ¥
function renderAbstraction() {
  const day = document.getElementById('daySelect').value;
  const subs = timetable[day];
  let html = `<h4>${day}ìš”ì¼</h4><table><tr><th>êµì‹œ</th><th>ì…ë ¥</th></tr>`;
  subs.forEach((_, i) => {
    const bg = special[day].includes(i + 1) ? '#fdd' : '';
    html += `<tr><td>${i + 1}êµì‹œ</td><td><input id="abs${i+1}" style="background:${bg}" placeholder="ê³¼ëª©ëª…"></td></tr>`;
  });
  html += '</table>';
  document.getElementById('abstractionTable').innerHTML = html;
}

// ì¶”ìƒí™” ì •ë‹µ í™•ì¸
function checkAbstraction() {
  const day = document.getElementById('daySelect').value;
  const subs = timetable[day];
  let out = '';
  subs.forEach((ans, i) => {
    const val = document.getElementById(`abs${i+1}`).value.trim();
    out += `${i+1}êµì‹œ: ` + (val === ans ? '<span class="correct">ì •ë‹µ</span>' : '<span class="incorrect">ì˜¤ë‹µ</span>') + '<br>';
  });
  document.getElementById('abstractionResult').innerHTML = out;
}

// íŒ¨í„´ ì¸ì‹ ì‹œê°í™”
function checkPatternVisual() {
  clearPatternBorders();
  const selected = Array.from(document.querySelectorAll('.pattern-check:checked')).map(cb => cb.value);

  if (selected.includes("special")) highlightSpecialSubjects();
  if (selected.includes("move")) highlightMovingSubjects();

  const correctAnswers = ["special", "move"];
  const isCorrect = correctAnswers.every(ans => selected.includes(ans)) && selected.length === correctAnswers.length;

  document.getElementById("patternResult").innerHTML = isCorrect
    ? "<span class='correct'>ì •ë‹µì…ë‹ˆë‹¤! âœ…</span>"
    : "<span class='incorrect'>ì˜¤ë‹µì…ë‹ˆë‹¤ âŒ</span>";
}


function clearPatternBorders() {
  document.querySelectorAll("td").forEach(td => {
    td.classList.remove("border-red");
    td.classList.remove("border-blue");
  });
}

function highlightSpecialSubjects() {
  Object.keys(special).forEach(day => {
    special[day].forEach(period => {
      const td = document.getElementById(`${day}_${period}`);
      if (td) td.classList.add("border-red");
    });
  });
}

function highlightMovingSubjects() {
  const moveSubjects = ["ì²´ìœ¡", "ìŒì•…", "ë¯¸ìˆ ", "ê³¼í•™"];
  Object.keys(timetable).forEach(day => {
    timetable[day].forEach((subj, idx) => {
      const td = document.getElementById(`${day}_${idx+1}`);
      if (td && moveSubjects.includes(subj) && !td.classList.contains("border-red")) {
        td.classList.add("border-blue");
      }
    });
  });
}

// ì•Œê³ ë¦¬ì¦˜ ì¡°ê±´ë¶€ ì§ˆë¬¸ í‘œì‹œ
function toggleMovementQuestion() {
  const isSpecial = document.getElementById("algo-special").value;
  const row = document.getElementById("movement-question");
  row.style.display = (isSpecial === "ì•„ë‹ˆì˜¤") ? "table-row" : "none";
}

function checkAlgorithmAnswer() {
  const subj = document.getElementById("algo-subject").value.trim();
  const isSpecial = document.getElementById("algo-special").value;
  const movingQ = document.getElementById("algo-moving-subject");
  const predicted = document.getElementById("algo-prediction").value;

  let correct = "ì¼ë°˜í•™ê¸‰";

  if (isSpecial === "ì˜ˆ") {
    correct = "íŠ¹ìˆ˜í•™ê¸‰";
  } else {
    if (["ì²´ìœ¡", "ìŒì•…", "ë¯¸ìˆ ", "ê³¼í•™"].includes(subj)) {
      correct = subj === "ì²´ìœ¡" ? "ìš´ë™ì¥" :
                subj === "ìŒì•…" ? "ìŒì•…ì‹¤" :
                subj === "ë¯¸ìˆ " ? "ë¯¸ìˆ ì‹¤" :
                subj === "ê³¼í•™" ? "ê³¼í•™ì‹¤" : "ì¼ë°˜í•™ê¸‰";
    }
  }

  const result = predicted === correct
    ? `<span class="correct">ì •ë‹µì…ë‹ˆë‹¤! âœ… (${correct})</span>`
    : `<span class="incorrect">ì˜¤ë‹µì…ë‹ˆë‹¤ âŒ<br>ì •ë‹µì€ [${correct}]ì…ë‹ˆë‹¤.</span>`;

  document.getElementById("algo-result").innerHTML = result;
}

// ìš”ì¼Â·êµì‹œ ëœë¤ ì¶œë ¥
function generateRandomDayPeriod() {
  const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ'];
  const periods = ['1êµì‹œ', '2êµì‹œ', '3êµì‹œ', '4êµì‹œ', '5êµì‹œ', '6êµì‹œ', '7êµì‹œ'];
  const d = days[Math.floor(Math.random() * days.length)];
  const p = periods[Math.floor(Math.random() * periods.length)];
  document.getElementById("randomResult").innerText = `ğŸ² ëœë¤ ê²°ê³¼: ${d}ìš”ì¼ ${p}`;
}

// íƒ­ ì „í™˜
function showTab(idx) {
  document.querySelectorAll(".tab-button").forEach((b, i) => {
    b.classList.toggle("active", i === idx);
    document.querySelectorAll(".tab-content")[i].classList.toggle("active", i === idx);
  });
}

// ì´ˆê¸°í™”
window.onload = () => {
  generateRandomTimetable();
  renderTimetableTable();
  renderAbstraction();
  showTab(0);
};
</script>
</body>
</html>

